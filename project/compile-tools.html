<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>编译工具 | TypeScript开发教程</title>
    <meta name="generator" content="VuePress 1.5.2">
    <link rel="icon" href="/vuepress-typescript/images/typescript.png">
    <meta name="description" content="目录">
    <link rel="preload" href="/vuepress-typescript/assets/css/0.styles.6153b166.css" as="style"><link rel="preload" href="/vuepress-typescript/assets/js/app.bde0b7fd.js" as="script"><link rel="preload" href="/vuepress-typescript/assets/js/2.3f0df748.js" as="script"><link rel="preload" href="/vuepress-typescript/assets/js/26.6206be3f.js" as="script"><link rel="prefetch" href="/vuepress-typescript/assets/js/10.ca189957.js"><link rel="prefetch" href="/vuepress-typescript/assets/js/11.a858ddc1.js"><link rel="prefetch" href="/vuepress-typescript/assets/js/12.513071a6.js"><link rel="prefetch" href="/vuepress-typescript/assets/js/13.b51a5d66.js"><link rel="prefetch" href="/vuepress-typescript/assets/js/14.3bd84577.js"><link rel="prefetch" href="/vuepress-typescript/assets/js/15.8b49ae34.js"><link rel="prefetch" href="/vuepress-typescript/assets/js/16.c22832b8.js"><link rel="prefetch" href="/vuepress-typescript/assets/js/17.3b456e5a.js"><link rel="prefetch" href="/vuepress-typescript/assets/js/18.e670256e.js"><link rel="prefetch" href="/vuepress-typescript/assets/js/19.2ca36dd0.js"><link rel="prefetch" href="/vuepress-typescript/assets/js/20.82313649.js"><link rel="prefetch" href="/vuepress-typescript/assets/js/21.558f10fa.js"><link rel="prefetch" href="/vuepress-typescript/assets/js/22.0d2991a3.js"><link rel="prefetch" href="/vuepress-typescript/assets/js/23.8a3267bb.js"><link rel="prefetch" href="/vuepress-typescript/assets/js/24.44f8dc66.js"><link rel="prefetch" href="/vuepress-typescript/assets/js/25.6f29ca8d.js"><link rel="prefetch" href="/vuepress-typescript/assets/js/27.b14c1db8.js"><link rel="prefetch" href="/vuepress-typescript/assets/js/28.d66aba6c.js"><link rel="prefetch" href="/vuepress-typescript/assets/js/29.d8eeb7ee.js"><link rel="prefetch" href="/vuepress-typescript/assets/js/3.9e4a2525.js"><link rel="prefetch" href="/vuepress-typescript/assets/js/30.0a6a0f62.js"><link rel="prefetch" href="/vuepress-typescript/assets/js/31.cf8eda74.js"><link rel="prefetch" href="/vuepress-typescript/assets/js/32.f732ab6b.js"><link rel="prefetch" href="/vuepress-typescript/assets/js/4.2e2c3fe2.js"><link rel="prefetch" href="/vuepress-typescript/assets/js/5.8abf2eed.js"><link rel="prefetch" href="/vuepress-typescript/assets/js/6.d4271ad8.js"><link rel="prefetch" href="/vuepress-typescript/assets/js/7.884b888d.js"><link rel="prefetch" href="/vuepress-typescript/assets/js/8.4f4d6c1f.js"><link rel="prefetch" href="/vuepress-typescript/assets/js/9.a7329968.js">
    <link rel="stylesheet" href="/vuepress-typescript/assets/css/0.styles.6153b166.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/vuepress-typescript/" class="home-link router-link-active"><!----> <span class="site-name">TypeScript开发教程</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="https://github.com/tiandashu/vuepress-typeScript.git" target="_blank" rel="noopener noreferrer" class="nav-link external">
  GitHub
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="https://github.com/tiandashu/vuepress-typeScript.git" target="_blank" rel="noopener noreferrer" class="nav-link external">
  GitHub
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>初识篇</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/vuepress-typescript/introduce/what-is-typescript.html" class="sidebar-link">什么是 TypeScript</a></li><li><a href="/vuepress-typescript/introduce/install-typescript.html" class="sidebar-link">安装 TypeScript</a></li><li><a href="/vuepress-typescript/introduce/hello-typescript.html" class="sidebar-link">Hello TypeScript</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>基础篇</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/vuepress-typescript/basics/basis-data-types.html" class="sidebar-link">基础类型</a></li><li><a href="/vuepress-typescript/basics/interface.html" class="sidebar-link">接口</a></li><li><a href="/vuepress-typescript/basics/function.html" class="sidebar-link">函数</a></li><li><a href="/vuepress-typescript/basics/class.html" class="sidebar-link">类</a></li><li><a href="/vuepress-typescript/basics/class-and-interface.html" class="sidebar-link">类与接口</a></li><li><a href="/vuepress-typescript/basics/generics.html" class="sidebar-link">泛型</a></li><li><a href="/vuepress-typescript/basics/type-check-mechanism.html" class="sidebar-link">类型检查机制</a></li><li><a href="/vuepress-typescript/basics/advanced-type.html" class="sidebar-link">高级类型</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>工程篇</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/vuepress-typescript/project/import-export.html" class="sidebar-link">导入导出</a></li><li><a href="/vuepress-typescript/project/namespace.html" class="sidebar-link">命名空间</a></li><li><a href="/vuepress-typescript/project/declaration-merging.html" class="sidebar-link">声明合并</a></li><li><a href="/vuepress-typescript/project/identify-the-class-library.html" class="sidebar-link">识别库的类型</a></li><li><a href="/vuepress-typescript/project/declaration-syntax.html" class="sidebar-link">声明语法</a></li><li><a href="/vuepress-typescript/project/declaration-files.html" class="sidebar-link">声明文件</a></li><li><a href="/vuepress-typescript/project/compile-tools.html" aria-current="page" class="active sidebar-link">编译工具</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/vuepress-typescript/project/compile-tools.html#ts-loader" class="sidebar-link">ts-loader</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/vuepress-typescript/project/compile-tools.html#提高构建速度" class="sidebar-link">提高构建速度</a></li><li class="sidebar-sub-header"><a href="/vuepress-typescript/project/compile-tools.html#fork-ts-checker-webpack-plugin" class="sidebar-link">fork-ts-checker-webpack-plugin</a></li></ul></li><li class="sidebar-sub-header"><a href="/vuepress-typescript/project/compile-tools.html#awesome-typescript-loader" class="sidebar-link">awesome-typescript-loader</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/vuepress-typescript/project/compile-tools.html#与-ts-loader-对比" class="sidebar-link">与 ts-loader 对比</a></li><li class="sidebar-sub-header"><a href="/vuepress-typescript/project/compile-tools.html#使用" class="sidebar-link">使用</a></li></ul></li><li class="sidebar-sub-header"><a href="/vuepress-typescript/project/compile-tools.html#babel-编译" class="sidebar-link">babel 编译</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/vuepress-typescript/project/compile-tools.html#安装使用" class="sidebar-link">安装使用</a></li><li class="sidebar-sub-header"><a href="/vuepress-typescript/project/compile-tools.html#_4种书写方式-babel-无法编译" class="sidebar-link">4种书写方式 Babel 无法编译</a></li></ul></li><li class="sidebar-sub-header"><a href="/vuepress-typescript/project/compile-tools.html#总结" class="sidebar-link">总结</a></li><li class="sidebar-sub-header"><a href="/vuepress-typescript/project/compile-tools.html#链接" class="sidebar-link">链接</a></li></ul></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>配置篇</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/vuepress-typescript/configuration/file-options.html" class="sidebar-link">文件选项</a></li><li><a href="/vuepress-typescript/configuration/compiler-options.html" class="sidebar-link">编译选项</a></li><li><a href="/vuepress-typescript/configuration/vscode-compiler.html" class="sidebar-link">解决 vscode 异常提示问题</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>实战篇</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/vuepress-typescript/actual/typescript-react.html" class="sidebar-link">typescript &amp; react 手动搭建</a></li><li><a href="/vuepress-typescript/actual/react-component-type.html" class="sidebar-link">React 组件与类型</a></li><li><a href="/vuepress-typescript/actual/typescript-vue.html" class="sidebar-link">typescript &amp; vue 手动搭建</a></li><li><a href="/vuepress-typescript/actual/vue-component-type.html" class="sidebar-link">Vue 组件与类型</a></li><li><a href="/vuepress-typescript/actual/typescript-eslint.html" class="sidebar-link">typescript &amp; eslint</a></li><li><a href="/vuepress-typescript/actual/typescript-jest.html" class="sidebar-link">typescript &amp; jest</a></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="编译工具"><a href="#编译工具" class="header-anchor">#</a> 编译工具</h1> <p>本篇主要介绍 ts-loader、awesome-typescript-loader 和 babel 分别编译 Typescript 的区别</p> <h2 id="ts-loader"><a href="#ts-loader" class="header-anchor">#</a> ts-loader</h2> <p><a href="https://www.npmjs.com/package/ts-loader" target="_blank" rel="noopener noreferrer">ts-loader<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> 内部调用了 <code>tsc</code>，所以在使用 <code>ts-loader</code> 时，会使用 <code>tsconfig.json</code> 配置文件。</p> <h3 id="提高构建速度"><a href="#提高构建速度" class="header-anchor">#</a> 提高构建速度</h3> <p>当项目中的代码变的越来越多，体积也越来越庞大时，项目编译时间也随之增加。这是因为 Typescript 的语义检查器必须在每次重建时检查所有文件。 <code>ts-loader</code> 提供了一个 <code>transpileOnly</code> 选项，它默认为 <code>false</code>，我们可以把它设置为 <code>true</code>，这样项目编译时就<strong>不会进行类型检查，也不会输出声明文件</strong>。</p> <div class="language-js extra-class"><pre class="language-js"><code>module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token operator">...</span>
  module<span class="token operator">:</span> <span class="token punctuation">{</span>
    rules<span class="token operator">:</span> <span class="token punctuation">[</span>
      <span class="token punctuation">{</span>
        test<span class="token operator">:</span> <span class="token regex">/\.tsx?$/</span><span class="token punctuation">,</span>
        use<span class="token operator">:</span> <span class="token punctuation">[</span>
          <span class="token punctuation">{</span>
            loader<span class="token operator">:</span> <span class="token string">'ts-loader'</span><span class="token punctuation">,</span>
            options<span class="token operator">:</span> <span class="token punctuation">{</span>
              transpileOnly<span class="token operator">:</span> <span class="token boolean">true</span>
            <span class="token punctuation">}</span>
          <span class="token punctuation">}</span>
        <span class="token punctuation">]</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">]</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>我们对一下 <code>transpileOnly</code> 分别设置 <code>false</code> 或 <code>true</code> 的项目构建速度。如下：</p> <div class="language-bash extra-class"><pre class="language-bash"><code>$ <span class="token function">yarn</span> build

<span class="token function">yarn</span> run v1.12.3
$ webpack --mode<span class="token operator">=</span>production --config ./build/webpack.config.js
Hash: 36308e3786425ccd2e9d
Version: webpack <span class="token number">4.41</span>.0
Time: 2482ms
Built at: <span class="token number">12</span>/20/2019 <span class="token number">4</span>:52:43 PM
     Asset       Size  Chunks             Chunk Names
    app.js  <span class="token number">932</span> bytes       <span class="token number">0</span>  <span class="token punctuation">[</span>emitted<span class="token punctuation">]</span>  main
index.html  <span class="token number">338</span> bytes          <span class="token punctuation">[</span>emitted<span class="token punctuation">]</span>
Entrypoint main <span class="token operator">=</span> app.js
<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> ./src/index.ts <span class="token number">14</span> bytes <span class="token punctuation">{</span><span class="token number">0</span><span class="token punctuation">}</span> <span class="token punctuation">[</span>built<span class="token punctuation">]</span>
Child html-webpack-plugin <span class="token keyword">for</span> <span class="token string">&quot;index.html&quot;</span><span class="token builtin class-name">:</span>
     <span class="token number">1</span> asset
    Entrypoint undefined <span class="token operator">=</span> index.html
    <span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> ./node_modules/html-webpack-plugin/lib/loader.js<span class="token operator">!</span>./index.html <span class="token number">489</span> bytes <span class="token punctuation">{</span><span class="token number">0</span><span class="token punctuation">}</span> <span class="token punctuation">[</span>built<span class="token punctuation">]</span>
    <span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span> <span class="token punctuation">(</span>webpack<span class="token punctuation">)</span>/buildin/global.js <span class="token number">472</span> bytes <span class="token punctuation">{</span><span class="token number">0</span><span class="token punctuation">}</span> <span class="token punctuation">[</span>built<span class="token punctuation">]</span>
    <span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span> <span class="token punctuation">(</span>webpack<span class="token punctuation">)</span>/buildin/module.js <span class="token number">497</span> bytes <span class="token punctuation">{</span><span class="token number">0</span><span class="token punctuation">}</span> <span class="token punctuation">[</span>built<span class="token punctuation">]</span>
        + <span class="token number">1</span> hidden module
✨  Done <span class="token keyword">in</span> <span class="token number">4</span>.88s.
</code></pre></div><div class="language-bash extra-class"><pre class="language-bash"><code>$ <span class="token function">yarn</span> build

<span class="token function">yarn</span> run v1.12.3
$ webpack --mode<span class="token operator">=</span>production --config ./build/webpack.config.js
Hash: e5a133a9510259e1f027
Version: webpack <span class="token number">4.41</span>.0
Time: 726ms
Built at: <span class="token number">12</span>/20/2019 <span class="token number">4</span>:54:20 PM
     Asset       Size  Chunks             Chunk Names
    app.js  <span class="token number">932</span> bytes       <span class="token number">0</span>  <span class="token punctuation">[</span>emitted<span class="token punctuation">]</span>  main
index.html  <span class="token number">338</span> bytes          <span class="token punctuation">[</span>emitted<span class="token punctuation">]</span>
Entrypoint main <span class="token operator">=</span> app.js
<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> ./src/index.ts <span class="token number">14</span> bytes <span class="token punctuation">{</span><span class="token number">0</span><span class="token punctuation">}</span> <span class="token punctuation">[</span>built<span class="token punctuation">]</span>
Child html-webpack-plugin <span class="token keyword">for</span> <span class="token string">&quot;index.html&quot;</span><span class="token builtin class-name">:</span>
     <span class="token number">1</span> asset
    Entrypoint undefined <span class="token operator">=</span> index.html
    <span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> ./node_modules/html-webpack-plugin/lib/loader.js<span class="token operator">!</span>./index.html <span class="token number">489</span> bytes <span class="token punctuation">{</span><span class="token number">0</span><span class="token punctuation">}</span> <span class="token punctuation">[</span>built<span class="token punctuation">]</span>
    <span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span> <span class="token punctuation">(</span>webpack<span class="token punctuation">)</span>/buildin/global.js <span class="token number">472</span> bytes <span class="token punctuation">{</span><span class="token number">0</span><span class="token punctuation">}</span> <span class="token punctuation">[</span>built<span class="token punctuation">]</span>
    <span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span> <span class="token punctuation">(</span>webpack<span class="token punctuation">)</span>/buildin/module.js <span class="token number">497</span> bytes <span class="token punctuation">{</span><span class="token number">0</span><span class="token punctuation">}</span> <span class="token punctuation">[</span>built<span class="token punctuation">]</span>
        + <span class="token number">1</span> hidden module
✨  Done <span class="token keyword">in</span> <span class="token number">2</span>.40s.
</code></pre></div><p>当 <code>transpileOnly</code> 为 false 时，整体构建时间为 <strong><code>4.88s</code></strong>
，当 <code>transpileOnly</code> 为 true 时，整体构建时间为 <strong><code>2.40s</code></strong></p> <p>虽然构建速度提升了，但是有了一个弊端打包编译<strong>不会进行类型检查</strong>。</p> <h3 id="fork-ts-checker-webpack-plugin"><a href="#fork-ts-checker-webpack-plugin" class="header-anchor">#</a> fork-ts-checker-webpack-plugin</h3> <p>这里官方推荐了一个解决方案，使用 <a href="https://github.com/TypeStrong/fork-ts-checker-webpack-plugin" target="_blank" rel="noopener noreferrer">fork-ts-checker-webpack-plugin<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>，它在一个单独的进程上运行类型检查器，该插件在编译之间重用抽象语法树，并与TSLint共享这些树。可以通过多进程模式进行扩展，以利用最大的CPU能力。</p> <p>需要注意的是，此插件使用 TypeScript 而不是 webpack 的模块解析，这一点非常重要。这意味着你必须正确设置 tsconfig.json。例如，如果您在 tsconfig.json 中设置文件：['./src/someFile.ts']，则此插件将仅检查 someFile.ts 的语义错误。这是为了构建性能。该插件的目标是尽可能快。有了 TypeScript 的模块解析，我们不必等待 webpack 编译文件（在编译过程中会遍历依赖图）-我们从一开始就拥有完整的文件列表。</p> <p>要调试 TypeScript 的模块解析，可以使用 <code>tsc --traceResolution</code>命令。</p> <h4 id="使用-fork-ts-checker-webpack-plugin"><a href="#使用-fork-ts-checker-webpack-plugin" class="header-anchor">#</a> 使用 fork-ts-checker-webpack-plugin</h4> <p>安装</p> <div class="language-bash extra-class"><pre class="language-bash"><code>$ <span class="token function">yarn</span> <span class="token function">add</span> -D fork-ts-checker-webpack-plugin
</code></pre></div><p>webpack.config.js 中修改：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> ForkTsCheckerWebpackPlugin <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'fork-ts-checker-webpack-plugin'</span><span class="token punctuation">)</span>

module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token operator">...</span>
  module<span class="token operator">:</span> <span class="token punctuation">{</span>
    rules<span class="token operator">:</span> <span class="token punctuation">[</span>
      <span class="token punctuation">{</span>
        test<span class="token operator">:</span> <span class="token regex">/\.tsx?$/</span><span class="token punctuation">,</span>
        use<span class="token operator">:</span> <span class="token punctuation">[</span>
          <span class="token punctuation">{</span>
            loader<span class="token operator">:</span> <span class="token string">'ts-loader'</span><span class="token punctuation">,</span>
            options<span class="token operator">:</span> <span class="token punctuation">{</span>
              transpileOnly<span class="token operator">:</span> <span class="token boolean">true</span>
            <span class="token punctuation">}</span>
          <span class="token punctuation">}</span>
        <span class="token punctuation">]</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">]</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  plugins<span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token keyword">new</span> <span class="token class-name">ForkTsCheckerWebpackPlugin</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre></div><p>这样在构建的时候，既保证了构建速度，又会对其做类型检查。</p> <p>它提供了更多的配置，如：<code>reportFiles</code></p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">new</span> <span class="token class-name">ForkTsCheckerWebpackPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  reportFiles<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">'src/**/*.{ts,tsx}'</span><span class="token punctuation">]</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><p>这里表示只报告与这些全局模式匹配的文件的错误。更多选项可以自行查阅。</p> <h2 id="awesome-typescript-loader"><a href="#awesome-typescript-loader" class="header-anchor">#</a> awesome-typescript-loader</h2> <h3 id="与-ts-loader-对比"><a href="#与-ts-loader-对比" class="header-anchor">#</a> 与 ts-loader 对比</h3> <ol><li><a href="https://www.npmjs.com/package/awesome-typescript-loader" target="_blank" rel="noopener noreferrer">atl<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> 更适合于 Babel 集成，当启用了 useBabel 和 useCache 标志时，typescript 的派发将被 Babel 替换并缓存，下次源文件和环境有相同的校验，我们可以完全跳过 typescript 和 Babel 的转换。</li> <li>atl 能够将类型检查器和发射器发送到一个单独的进程，这也加快了类似热更新的开发场景。</li> <li>不需要安装额外的插件。</li></ol> <h3 id="使用"><a href="#使用" class="header-anchor">#</a> 使用</h3> <div class="language-bash extra-class"><pre class="language-bash"><code>$ <span class="token function">yarn</span> <span class="token function">add</span> awesome-typescript-loader
</code></pre></div><p>webpack.config.js</p> <div class="language-js extra-class"><pre class="language-js"><code>rules<span class="token operator">:</span> <span class="token punctuation">[</span>
  <span class="token punctuation">{</span>
    test<span class="token operator">:</span> <span class="token regex">/\.tsx?$/i</span><span class="token punctuation">,</span>
    use<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">{</span>
      loader<span class="token operator">:</span> <span class="token string">'awesome-typescript-loader'</span><span class="token punctuation">,</span>
      options<span class="token operator">:</span> <span class="token punctuation">{</span>
        transpileOnly<span class="token operator">:</span> <span class="token boolean">true</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
    exclude<span class="token operator">:</span> <span class="token regex">/node_modules/</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">]</span>
</code></pre></div><p>atl 本身提供了检查插件 <code>CheckerPlugin</code>，检查 ts 语法错误。</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> <span class="token punctuation">{</span> CheckerPlugin <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'awesome-typescript-loader'</span><span class="token punctuation">)</span>

<span class="token operator">...</span>

plugins<span class="token operator">:</span> <span class="token punctuation">[</span>
  <span class="token keyword">new</span> <span class="token class-name">CheckerPlugin</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">]</span>
</code></pre></div><div class="custom-block warning"><p class="custom-block-title">WARNING</p> <p>当 <code>transpileOnly</code> 设置为 true 时，<code>CheckerPlugin</code> 将会无效</p></div> <h2 id="babel-编译"><a href="#babel-编译" class="header-anchor">#</a> babel 编译</h2> <p>TSC 与 Babel 对比</p> <table><thead><tr><th>-</th> <th>编译能力</th> <th>类型检查</th> <th>插件</th></tr></thead> <tbody><tr><td>TSC</td> <td>ts(x)、js(x) -&gt; es3/5/6/...</td> <td>有</td> <td>无</td></tr> <tr><td>Babel</td> <td>ts(x)、js(x) -&gt; es3/5/6/...</td> <td>无</td> <td>丰富</td></tr></tbody></table> <p>Babel 没有类型检查机制，可以配合 typescript <code>tsc --watch</code>.</p> <h3 id="安装使用"><a href="#安装使用" class="header-anchor">#</a> 安装使用</h3> <p>安装包</p> <div class="language- extra-class"><pre class="language-text"><code>  &quot;@babel/cli&quot;: &quot;^7.4.4&quot;,
  &quot;@babel/core&quot;: &quot;^7.4.5&quot;,
  &quot;@babel/plugin-proposal-class-properties&quot;: &quot;^7.4.4&quot;,
  &quot;@babel/plugin-proposal-object-rest-spread&quot;: &quot;^7.4.4&quot;,
  &quot;@babel/preset-env&quot;: &quot;^7.4.5&quot;,
  &quot;@babel/preset-typescript&quot;: &quot;^7.3.3&quot;
</code></pre></div><p><code>plugin-proposal-class-properties</code> 支持 class、<code>plugin-proposal-object-rest-spread</code> 支持对象解构赋值</p> <p>.babelrc</p> <div class="language- extra-class"><pre class="language-text"><code>{
  &quot;presets&quot;: [
    &quot;@babel/env&quot;,
    &quot;@babel/preset-typescript&quot;
  ],
  &quot;plugins&quot;: [
    &quot;@babel/proposal-class-properties&quot;,
    &quot;@babel/proposal-object-rest-spread&quot;
  ]
}
</code></pre></div><h3 id="_4种书写方式-babel-无法编译"><a href="#_4种书写方式-babel-无法编译" class="header-anchor">#</a> 4种书写方式 Babel 无法编译</h3> <ol><li>命名空间</li></ol> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">namespace</span> <span class="token constant">N</span> <span class="token punctuation">{</span>
  <span class="token keyword">export</span> <span class="token keyword">const</span> n <span class="token operator">=</span> <span class="token number">1</span>
<span class="token punctuation">}</span>
</code></pre></div><ol start="2"><li>类型断言只允许使用 <code>as</code></li></ol> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">let</span> s <span class="token operator">=</span> <span class="token operator">&lt;</span><span class="token constant">A</span><span class="token operator">&gt;</span><span class="token punctuation">{</span><span class="token punctuation">}</span>
</code></pre></div><ol start="3"><li>常量枚举</li></ol> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">const</span> <span class="token keyword">enum</span> <span class="token constant">E</span> <span class="token punctuation">{</span> <span class="token constant">A</span> <span class="token punctuation">}</span>
</code></pre></div><ol start="4"><li>默认导出</li></ol> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">export</span> <span class="token operator">=</span> s
</code></pre></div><h2 id="总结"><a href="#总结" class="header-anchor">#</a> 总结</h2> <ol><li>如果没有使用过 Babel，应使用 TypeScript 自身编译器，可配合 ts-loader.</li> <li>如果项目中已经安装使用了 Babel，可以安装 @babel/preset-typescript，配合 tsc 做类型检查.</li> <li>两种编译工具不要混合使用.</li></ol> <h2 id="链接"><a href="#链接" class="header-anchor">#</a> 链接</h2> <p><a href="https://github.com/dengwb1991/typescript-in-action/tree/master/base-typescript/fifth-typescript" target="_blank" rel="noopener noreferrer">ts-loader、awesome-typescript-loader 示例<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <p><a href="https://github.com/dengwb1991/typescript-in-action/tree/master/base-typescript/ts-babel" target="_blank" rel="noopener noreferrer">typescript-babel 示例<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p></div> <footer class="page-edit"><!----> <div class="last-updated"><span class="prefix">Last Updated:</span> <span class="time">1/5/2020, 9:58:17 PM</span></div></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/vuepress-typescript/project/declaration-files.html" class="prev">
        声明文件
      </a></span> <span class="next"><a href="/vuepress-typescript/configuration/file-options.html">
        文件选项
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/vuepress-typescript/assets/js/app.bde0b7fd.js" defer></script><script src="/vuepress-typescript/assets/js/2.3f0df748.js" defer></script><script src="/vuepress-typescript/assets/js/26.6206be3f.js" defer></script>
  </body>
</html>
